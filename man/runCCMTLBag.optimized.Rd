% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/25-DEGAS_Screen.R
\name{runCCMTLBag.optimized}
\alias{runCCMTLBag.optimized}
\title{Optimized Bootstrap Aggregation for Cross-Condition Multi-Task Learning}
\usage{
runCCMTLBag.optimized(
  scExp,
  scLab,
  patExp,
  patLab,
  tmpDir,
  model_type,
  architecture,
  FFdepth,
  Bagdepth,
  DEGAS.seed
)
}
\arguments{
\item{scExp}{A matrix or data frame containing single-cell expression data
for model training.}

\item{scLab}{A matrix containing single-cell labels corresponding
to the expression data.}

\item{patExp}{A matrix or data frame containing patient-level expression data
for multi-task learning.}

\item{patLab}{A matrix containing patient-level labels corresponding
to the patient expression data.}

\item{tmpDir}{Character string specifying the temporary directory path for
storing intermediate files and model outputs.}

\item{model_type}{Character string specifying the type of model to train.
Should match available DEGAS model types.}

\item{architecture}{Character string specifying the neural network architecture.
One of: "DenseNet", "Standard".}

\item{FFdepth}{Integer specifying the number of layers in the feed-forward
network architecture.}

\item{Bagdepth}{Integer specifying the number of bootstrap models to train
in the ensemble.}

\item{DEGAS.seed}{Integer specifying the base random seed for reproducible
model training. Each model in the ensemble uses a derived seed.}
}
\value{
Returns a list of trained CCMTL model objects from the bootstrap aggregation
process. The list contains successful model results with proper error handling
for failed training attempts.
}
\description{
Performs bootstrap aggregated training of multiple CCMTL models to enhance
robustness and reduce variance in predictions. This function trains an
ensemble of models with different random seeds and aggregates the results.
}
\details{
This function implements bootstrap aggregated training (bagging) for CCMTL
models with the following features:
\subsection{Ensemble Training:}{
\itemize{
\item Trains multiple models with different random seeds derived from the base seed
\item Uses parallel-safe file management to avoid I/O conflicts
\item Implements comprehensive error handling to continue training even if
individual models fail
}
}

\subsection{Error Handling:}{
\itemize{
\item Continues training even if individual models fail
\item Returns only successfully trained models
\item Provides progress feedback for long-running ensemble training
}
}
}
\note{
The bootstrap aggregation process can be computationally intensive, especially
for large datasets or deep architectures. The function creates derived seeds
for each model (base seed + model index) to ensure reproducibility while
maintaining diversity in the ensemble.
}
\examples{
\dontrun{
# Train an ensemble of 10 CCMTL models
ensemble_models <- runCCMTLBag.optimized(
  scExp = sc_expression,
  scLab = sc_labels,
  patExp = patient_expression,
  patLab = patient_labels,
  tmpDir = "/tmp/degas_models",
  model_type = "classification",
  architecture = "DenseNet",
  FFdepth = 3,
  Bagdepth = 10,
  DEGAS.seed = 42
)

# Access individual models from the ensemble
first_model <- ensemble_models[[1]]
}

}
\references{
Johnson TS, Yu CY, Huang Z, Xu S, Wang T, Dong C, et al. Diagnostic Evidence GAuge of Single cells (DEGAS): a flexible deep transfer learning framework for prioritizing cells in relation to disease. Genome Med. 2022 Feb 1;14(1):11.
}
\seealso{
\link{runCCMTL.optimized} for single model training,
\code{\link[purrr:map]{purrr::map()}} for the iterative execution pattern.

Other DEGAS: 
\code{\link{DoDEGAS}()},
\code{\link{LabelBinaryCells}()},
\code{\link{LabelContinuousCells}()},
\code{\link{LabelSurvivalCells}()},
\code{\link{Vec2sparse}()},
\code{\link{predClassBag.optimized}()},
\code{\link{readOutputFiles.optimized}()},
\code{\link{runCCMTL.optimized}()},
\code{\link{writeInputFiles.optimized}()}
}
\concept{DEGAS}
\keyword{internal}
